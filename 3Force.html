in_html = True

try:
    from browser import document, html, window
except ImportError:
    in_html = False

w = 8
h = w

board = [
' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', '⛂', '⛂', ' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', 
' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 
' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '⛀', ' ', '⛀', ' ', '⛀', ' ', '⛀', ' ', 
' ', '⛀', ' ', '⛀', ' ', '⛀', ' ', '⛀', '⛀', ' ', '⛀', ' ', '⛀', ' ', '⛀', ' ',
]
click_count = 0
colors = [''] * w * h

def Draw():
    result_html = "<table border = 1>" 

    result_html += "<tr> <td></td> <td>a</td> <td>b</td> <td>c</td> <td>d</td> <td>e</td> <td>f</td> <td>g</td> <td>h</td>  </tr>" 

    for y in range(h):
        result_html += "<tr> <td>" + str(y + 1) + " </td>"
        for x in range(w):
            bgcolor = "bgcolor=white" 
            if (x + y) % 2 == 1: 
                bgcolor = "bgcolor=#999999"
            if colors[y * w + x] != "":
                bgcolor = "bgcolor=" + colors[y * w + x]
            onclick = "onclick='OnClick(" + str(x) + "," + str(y) + ");'"
            td = "<td " + onclick + " " + bgcolor +  " >" + board[y * w + x] + "</td>"
            result_html += td

        result_html += "</tr>"

    result_html += "</table>"

    document["out-text"].innerHTML = result_html

words = "abcdefgh"

def colored_text(txt_msg, rf, bf, gf, rb, gb, bb):
    style = '\33[38;2;' + str(rf) + ';' + str(gf) + ';' + str(bf) + ';48;2;' + str(rb) + ';' +str(gb) + ';' + str(bb) + 'm'
    end = '\33[0m'
    return style + txt_msg + end

def DrawText():
    new_line = "\n"
    rf, bf, gf = 255, 255, 255
    wrf, wbf, wgf = 155, 155, 155
    wrb, wbb, wgb = 0, 0, 0
    result = "  " + colored_text(words, wrf, wbf, wgf, wrb, wgb, wbb) + new_line

    for y in range(h):
        result += colored_text(str(y + 1), wrf, wbf, wgf, wrb, wgb, wbb) + " " 
        for x in range(w):
            rb, gb, bb = 0, 0, 0
            if (x + y) % 2 == 1: 
                rb, gb, bb = 100, 100, 100
            if colors[y * w + x] != "":
                rb, gb, bb = 255, 0, 0
            td = colored_text(board[y * w + x], rf, bf, gf, rb, gb, bb)
            result += td

        result += new_line

    print(result)


def OnClick(x, y):
    global click_count
    index = y * w + x
    if board[index] == '⛀' and colors[index] == "":
        click_count += 1
        print("click_count = ", click_count)
    if colors[index] == "red":
        colors[index] = ""
    elif board[index] == '⛀':
        colors[index] = "red"
    if (in_html):
        Draw()

if in_html:
    window.OnClick = OnClick
    Draw()
else:
    while True:
        DrawText()
        s = input("Введите следующий ход (например e2):")
        x = int(words.find(s[0]))
        y = int(s[1]) - 1
        OnClick(x, y)
