<!-- 
Copyright © 2026 
Алексей Безбородов. Контакты: <AlexeiBv+3Force@narod.ru>
Лицензия: Общественное достояние: http://unlicense.org/
License: Public domain: http://unlicense.org/
-->
<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Игра 3-я сила</title>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.8.9/brython.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.8.9/brython_stdlib.js"></script>
</head>
<body onload="brython()">

<p id="out-text"></p>

<script type="text/python">


in_html = True

try:
    from browser import document, html, window
except ImportError:
    in_html = False

w = 8
h = w

boardChekers = [
' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', '⛂', '⛂', ' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', 
' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', '⛂', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 
' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '⛀', ' ', '⛀', ' ', '⛀', ' ', '⛀', ' ', 
' ', '⛀', ' ', '⛀', ' ', '⛀', ' ', '⛀', '⛀', ' ', '⛀', ' ', '⛀', ' ', '⛀', ' ',
]
boardChess = [
'♜', '♞', '♝', '♛', '♚', '♝', '♞', '♜', '♟', '♟', '♟', '♟', '♟', '♟', '♟', '♟', 
' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 
' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 
'♙', '♙', '♙', '♙', '♙', '♙', '♙', '♙', '♖', '♘', '♗', '♕', '♔', '♗', '♘', '♖',
]
board = boardChekers
click_count = 0
colors = [''] * w * h

def Draw(onClickFunc):
    result_html = "<table border = 1>" 

    result_html += "<tr> <td></td> <td>a</td> <td>b</td> <td>c</td> <td>d</td> <td>e</td> <td>f</td> <td>g</td> <td>h</td>  </tr>" 

    for y in range(h):
        result_html += "<tr> <td>" + str(y + 1) + " </td>"
        for x in range(w):
            bgcolor = "bgcolor=white" 
            if (x + y) % 2 == 1: 
                bgcolor = "bgcolor=#999999"
            if colors[y * w + x] != "":
                bgcolor = "bgcolor=" + colors[y * w + x]
            onclick = "onclick='" + onClickFunc + "(" + str(x) + "," + str(y) + ");'"
            td = "<td " + onclick + " " + bgcolor +  " >" + board[y * w + x] + "</td>"
            result_html += td

        result_html += "</tr>"

    result_html += "</table>"

    document["out-text"].innerHTML = result_html

words = "abcdefgh"

def colored_text(txt_msg, red_front, green_front, blue_front, red_back, green_back, blue_back):
    style = '\33[38;2;' + str(red_front) + ';' + str(green_front) + ';' + str(blue_front) + ';48;2;' + str(red_back) + ';' + str(green_back) + ';' + str(blue_back) + 'm'
    end = '\33[0m'
    return style + txt_msg + end

def DrawText():
    new_line = "\n"
    rf, bf, gf = 255, 255, 255
    wrf, wbf, wgf = 155, 155, 155
    wrb, wbb, wgb = 0, 0, 0
    result = "  " + colored_text(words, wrf, wbf, wgf, wrb, wgb, wbb) + new_line

    for y in range(h):
        result += colored_text(str(y + 1), wrf, wbf, wgf, wrb, wgb, wbb) + " " 
        for x in range(w):
            rb, gb, bb = 0, 0, 0
            if (x + y) % 2 == 1: 
                rb, gb, bb = 100, 100, 100
            if colors[y * w + x] != "":
                rb, gb, bb = 255, 0, 0
            td = colored_text(board[y * w + x], rf, bf, gf, rb, gb, bb)
            result += td

        result += new_line

    print(result)


def OnClickCheckers(x, y):
    global click_count
    index = y * w + x
    if board[index] == '⛀' and colors[index] == "":
        click_count += 1
        print("click_count = ", click_count)
    if colors[index] == "red":
        colors[index] = ""
    elif board[index] == '⛀':
        colors[index] = "red"
    if (in_html):
        Draw('OnClickCheckers')

def OnClickChess(x, y):
    index = y * w + x
    if colors[index] == "red":
        colors[index] = ""
    else:
        colors[index] = "red"
    if (in_html):
        Draw('OnClickChess')

if in_html:
    window.OnClickCheckers = OnClickCheckers
    Draw('OnClickCheckers')
else:
    q = '''
Укажите тип игры (по умолчанию 1):
1 - Шашки
2 - Шахматы
:'''
    gameType = input(q)
    if gameType == '2':
        board = boardChess

    while True:
        DrawText()
        s = input("Введите следующий ход (например e2):")
        x = int(words.find(s[0]))
        y = int(s[1]) - 1
        if gameType == '2':
            OnClickChess(x, y)
        else:
            OnClickCheckers(x, y)


</script>

</body>

</html>
